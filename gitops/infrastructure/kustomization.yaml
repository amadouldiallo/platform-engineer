# =============================================================================
# Infrastructure Kustomization
# =============================================================================
# Ce fichier Kustomize agrège tous les composants d'infrastructure
# FluxCD appliquera tout ce qui est listé ici
#
# ⚠️ NOTE: kube-prometheus-stack désactivé car trop gourmand pour e2-medium
#    Le cluster GKE lab n'a que 2 vCPU / 4GB RAM
# =============================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Controllers (ordre important: cert-manager avant ingress si TLS)
  - controllers/ingress-nginx
  - controllers/cert-manager
  
  # Monitoring - DÉSACTIVÉ (ressources insuffisantes sur e2-medium)
  # Réactiver sur un cluster plus grand :
  # - monitoring/kube-prometheus-stack

