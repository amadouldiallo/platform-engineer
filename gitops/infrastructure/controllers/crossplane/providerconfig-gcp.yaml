# =============================================================================
# ProviderConfig GCP
# =============================================================================
# Configuration pour authentifier Crossplane auprès de GCP
# 
# ⚠️ PROJETS LAB: Utilise Service Account Key (Option B)
#    Les projets lab n'ont pas les permissions pour créer des Service Accounts
#    via Terraform, donc on utilise une clé JSON stockée dans un Secret K8s
# =============================================================================

apiVersion: gcp.upbound.io/v1beta1
kind: ProviderConfig
metadata:
  name: default
  namespace: crossplane-system
spec:
  # Project ID GCP (à mettre à jour)
  projectID: PROJECT_ID_PLACEHOLDER  # Ex: kkgcplabs01-032
  
  # Option B: Service Account Key (pour projets lab)
  credentials:
    source: Secret
    secretRef:
      namespace: crossplane-system
      name: gcp-credentials
      key: credentials
  
  # Option A: Workload Identity (pour production, nécessite permissions IAM)
  # credentials:
  #   source: InjectedIdentity

